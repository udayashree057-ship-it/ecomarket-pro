<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="EcoMarket">
    <meta name="theme-color" content="#667eea">
    <meta name="format-detection" content="telephone=yes">
    <title>EcoMarket - Sustainable Shopping Platform | Buy, Sell & Rent Eco-Friendly Products</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="EcoMarket - India's leading sustainable e-commerce platform. Buy, sell, and rent eco-friendly products with unique barcodes, carbon footprint tracking, and multilingual support in 7 languages.">
    <meta name="keywords" content="ecomarket, sustainable shopping, eco-friendly products, green shopping, carbon footprint, sustainable e-commerce, buy eco products, sell eco products, rent products, India shopping, eco ratings">
    <meta name="author" content="EcoMarket">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ecomarket.vercel.app/">
    <meta property="og:title" content="EcoMarket - Sustainable Shopping Platform">
    <meta property="og:description" content="Buy, sell, and rent eco-friendly products. Track carbon footprint, scan product barcodes, and shop sustainably.">
    <meta property="og:image" content="https://ecomarket.vercel.app/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ecomarket.vercel.app/">
    <meta property="twitter:title" content="EcoMarket - Sustainable Shopping Platform">
    <meta property="twitter:description" content="Buy, sell, and rent eco-friendly products. Track carbon footprint, scan product barcodes, and shop sustainably.">
    <meta property="twitter:image" content="https://ecomarket.vercel.app/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå±</text></svg>">
    
    <link rel="stylesheet" href="styles.css">
    <script src="translations.js"></script>
    <script src="qrcode.min.js"></script>
    <script src="jsQR.min.js"></script>
    <script src="app.js"></script>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav id="navbar" style="display: none;">
            <div class="nav-container">
                <h1 onclick="goHome()" style="cursor:pointer;transition:opacity 0.3s ease;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">üå± EcoMarket</h1>
                <div class="nav-links">
                    <select id="languageSelector" onchange="changeLanguage()">
                        <option value="en">English</option>
                        <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                        <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                        <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
                        <option value="ur">ÿßÿ±ÿØŸà (Urdu)</option>
                        <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                    </select>
                    <button onclick="showCustomerPage()" class="customer-btn" title="Manage Customers">üë•</button>
                    <button onclick="openBarcodeScanner()" class="scanner-btn-nav" title="Scan Barcode">üì∑</button>
                    <button onclick="toggleVoiceAssistant()" class="voice-btn">üé§</button>
                    <button onclick="toggleChatbot()" class="chat-btn">üí¨</button>
                    <span id="userGreeting"></span>
                    <button onclick="logout()" data-translate="logout">Logout</button>
                </div>
            </div>
        </nav>

        <!-- Auth Pages -->
        <div id="authPage">
            <div class="auth-container">
                <h1>üå± EcoMarket</h1>
                <p data-translate="tagline">Sustainable Shopping for a Better Tomorrow</p>
                
                <div id="loginForm" class="auth-form">
                    <h2 data-translate="login">Login</h2>
                    <input type="email" id="loginEmail" placeholder="Email" data-translate-placeholder="email">
                    <input type="password" id="loginPassword" placeholder="Password" data-translate-placeholder="password">
                    <button onclick="login()" data-translate="loginBtn">Login</button>
                    <p><span data-translate="noAccount">Don't have an account?</span> <a onclick="showRegister()" data-translate="registerLink">Register</a></p>
                </div>

                <div id="registerForm" class="auth-form" style="display: none;">
                    <h2 data-translate="register">Register</h2>
                    <input type="text" id="regName" placeholder="Full Name" data-translate-placeholder="fullName">
                    <input type="email" id="regEmail" placeholder="Email" data-translate-placeholder="email">
                    <input type="password" id="regPassword" placeholder="Password" data-translate-placeholder="password">
                    <input type="tel" id="regPhone" placeholder="Phone Number" data-translate-placeholder="phone">
                    <textarea id="regAddress" placeholder="Address" data-translate-placeholder="address"></textarea>
                    <button onclick="register()" data-translate="registerBtn">Register</button>
                    <p><span data-translate="haveAccount">Already have an account?</span> <a onclick="showLogin()" data-translate="loginLink">Login</a></p>
                </div>
            </div>
        </div>

        <!-- Role Selection -->
        <div id="roleSelection" style="display: none;">
            <div class="role-banner">
                <div class="banner-content">
                    <h1>üå± Welcome to EcoMarket</h1>
                    <p>Sustainable Shopping for a Better Tomorrow</p>
                </div>
            </div>
            <div class="role-container">
                <h2 data-translate="selectRole">Select Your Role</h2>
                <div class="role-cards">
                    <div class="role-card" onclick="selectRole('buyer')">
                        <div class="role-icon">üõí</div>
                        <h3 data-translate="buyer">Buyer</h3>
                        <p data-translate="buyerDesc">Browse and purchase products</p>
                    </div>
                    <div class="role-card" onclick="selectRole('seller')">
                        <div class="role-icon">üè™</div>
                        <h3 data-translate="seller">Seller</h3>
                        <p data-translate="sellerDesc">List and sell your products</p>
                    </div>
                    <div class="role-card" onclick="selectRole('renter')">
                        <div class="role-icon">üîÑ</div>
                        <h3 data-translate="renter">Renter</h3>
                        <p data-translate="renterDesc">Rent products temporarily</p>
                    </div>
                    <div class="role-card" onclick="showOrdersPage()">
                        <div class="role-icon">üì¶</div>
                        <h3>My Orders</h3>
                        <p>View your purchase history</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Buyer Page -->
        <div id="buyerPage" style="display: none;">
            <div style="padding:20px;border-bottom:2px solid #667eea;display:flex;justify-content:space-between;align-items:center;">
                <h2 style="margin:0;">üõí Browse Products</h2>
                <div style="display:flex;gap:10px;align-items:center;">
                    <button onclick="showOrdersPage()" style="padding:8px 16px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-size:14px;">üì¶ My Orders</button>
                    <button onclick="backToRoleSelection()" style="padding:8px 16px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;">‚Üê Back</button>
                </div>
            </div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search products..." data-translate-placeholder="searchProducts" oninput="searchProducts()">
                <select id="categoryFilter" onchange="filterByCategory()">
                    <option value="all" data-translate="allCategories">All Categories</option>
                    <option value="plastic">Plastic</option>
                    <option value="wood">Wood</option>
                    <option value="steel">Steel</option>
                    <option value="electric">Electric</option>
                    <option value="bamboo">Bamboo</option>
                    <option value="metals">Metals</option>
                </select>
                <button onclick="viewCart()" class="cart-btn">üõí <span id="cartCount">0</span></button>
            </div>
            <div id="productGrid" class="product-grid"></div>
        </div>

        <!-- Seller Page -->
        <div id="sellerPage" style="display: none;">
            <div style="padding:20px;border-bottom:2px solid #667eea;display:flex;justify-content:space-between;align-items:center;">
                <h2 style="margin:0;">üè™ Seller Dashboard</h2>
                <button onclick="backToRoleSelection()" style="padding:8px 16px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;">‚Üê Back</button>
            </div>
            <div class="seller-container">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:2rem;">
                    <!-- Left Column: Product Form & Payment Details -->
                    <div>
                        <!-- Payment Details Section -->
                        <div class="seller-form-section" style="margin-bottom:2rem;background:#e8f4f8;border-left:4px solid #17a2b8;">
                            <h3 style="margin-bottom:1.5rem;color:#333;font-size:1.2rem;">üí≥ Payment Details</h3>
                            <div style="display:flex;gap:10px;margin-bottom:15px;">
                                <button onclick="togglePaymentForm('upi')" style="flex:1;padding:10px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;">üì± UPI</button>
                                <button onclick="togglePaymentForm('bank')" style="flex:1;padding:10px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;">üè¶ Bank</button>
                            </div>
                            
                            <!-- UPI Payment Form -->
                            <div id="upiForm" style="display:none;margin-bottom:15px;">
                                <div class="form-group">
                                    <label>UPI ID *</label>
                                    <input type="text" id="sellerUpiId" placeholder="e.g., yourname@upi" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
                                </div>
                                <div class="form-group">
                                    <label>Account Holder Name *</label>
                                    <input type="text" id="sellerUpiName" placeholder="Full Name" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;margin-top:8px;">
                                </div>
                                <button onclick="saveUpiDetails()" style="width:100%;padding:10px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;margin-top:10px;">‚úÖ Save UPI Details</button>
                                <div id="upiStatus" style="margin-top:10px;padding:10px;background:white;border-radius:4px;text-align:center;color:#999;display:none;"></div>
                            </div>

                            <!-- Bank Payment Form -->
                            <div id="bankForm" style="display:none;margin-bottom:15px;">
                                <div class="form-group">
                                    <label>Account Holder Name *</label>
                                    <input type="text" id="sellerBankName" placeholder="Full Name" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
                                </div>
                                <div class="form-group">
                                    <label>Account Number *</label>
                                    <input type="text" id="sellerAccountNumber" placeholder="Account Number" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;margin-top:8px;">
                                </div>
                                <div class="form-group">
                                    <label>IFSC Code *</label>
                                    <input type="text" id="sellerIfscCode" placeholder="e.g., SBIN0001234" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;margin-top:8px;">
                                </div>
                                <div class="form-group">
                                    <label>Bank Name *</label>
                                    <input type="text" id="sellerBankName2" placeholder="Bank Name" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;margin-top:8px;">
                                </div>
                                <button onclick="saveBankDetails()" style="width:100%;padding:10px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;margin-top:10px;">‚úÖ Save Bank Details</button>
                                <div id="bankStatus" style="margin-top:10px;padding:10px;background:white;border-radius:4px;text-align:center;color:#999;display:none;"></div>
                            </div>
                            
                            <div style="margin-top:8px;">
                                <button onclick="showSellerOrders()" style="width:100%;padding:10px;background:#ffb74d;color:#333;border:none;border-radius:4px;cursor:pointer;font-weight:bold;">üì¨ View My Orders</button>
                            </div>
                        </div>

                        <!-- Product Form -->
                        <div class="seller-form-section">
                            <h3 style="margin-bottom:1.5rem;color:#333;font-size:1.3rem;">üì¶ Add New Product</h3>
                            <form id="productForm" class="product-form">
                            <div class="form-group">
                                <label>Product Name *</label>
                                <input type="text" id="productName" placeholder="Enter product name" required>
                            </div>

                            <div class="form-group">
                                <label>Description *</label>
                                <textarea id="productDesc" placeholder="Detailed product description" required rows="3"></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Price (‚Çπ) *</label>
                                    <input type="number" id="productPrice" placeholder="0.00" step="0.01" required>
                                </div>
                                <div class="form-group">
                                    <label>Category *</label>
                                    <select id="productCategory" required>
                                        <option value="">Select Category</option>
                                        <option value="plastic">Plastic</option>
                                        <option value="wood">Wood</option>
                                        <option value="steel">Steel</option>
                                        <option value="electric">Electric</option>
                                        <option value="bamboo">Bamboo</option>
                                        <option value="bamboo">Food</option>
                                        <option value="metals">Metals</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Product Image *</label>
                                <input type="file" id="productImage" accept="image/*" required>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Eco Rating (1-5) *</label>
                                    <input type="number" id="ecoRating" min="1" max="5" placeholder="5" required>
                                </div>
                                <div class="form-group">
                                    <label>Carbon Footprint (kg) *</label>
                                    <input type="number" id="carbonFootprint" placeholder="0.00" step="0.01" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Manufacturer *</label>
                                    <input type="text" id="manufacturer" placeholder="Manufacturer name" required>
                                </div>
                                <div class="form-group">
                                    <label>Location *</label>
                                    <input type="text" id="manufacturerLocation" placeholder="Manufacturing location" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Manufacture Date *</label>
                                    <input type="date" id="manufactureDate" required>
                                </div>
                                <div class="form-group">
                                    <label>Expiry Date</label>
                                    <input type="date" id="expiryDate">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Usage Instructions</label>
                                <textarea id="usageInstructions" placeholder="How to use this product" rows="2"></textarea>
                            </div>

                            <div class="form-group">
                                <label>Recycling Information</label>
                                <textarea id="recyclingInfo" placeholder="Recycling and disposal instructions" rows="2"></textarea>
                            </div>

                            <div class="form-group checkbox">
                                <input type="checkbox" id="forRent">
                                <label style="display:inline;margin-left:0.5rem;">Available for Rent</label>
                            </div>

                            <button type="submit" class="btn-primary" style="width:100%;padding:1rem;font-size:1rem;">‚ú® Add Product</button>
                        </form>
                        </div>
                    </div>

                    <!-- Right Column: Product Inventory -->
                    <div class="seller-inventory-section">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;">
                            <h3 style="margin:0;color:#333;font-size:1.3rem;">üìã Your Inventory</h3>
                            <span id="productCount" style="background:#667eea;color:white;padding:0.4rem 0.8rem;border-radius:20px;font-size:0.9rem;">0 products</span>
                        </div>

                        <div style="display:flex;gap:0.8rem;margin-bottom:1.5rem;">
                            <input type="text" id="sellerSearchInput" placeholder="Search your products..." style="flex:1;padding:0.8rem;border:1px solid #ddd;border-radius:4px;">
                            <select id="sellerCategoryFilter" style="padding:0.8rem;border:1px solid #ddd;border-radius:4px;min-width:120px;">
                                <option value="">All Categories</option>
                                <option value="plastic">Plastic</option>
                                <option value="wood">Wood</option>
                                <option value="steel">Steel</option>
                                <option value="electric">Electric</option>
                                <option value="bamboo">Bamboo</option>
                                <option value="metals">Metals</option>
                            </select>
                        </div>

                        <div id="sellerProductList" class="seller-products-grid"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Renter Page -->
        <div id="renterPage" style="display: none;">
            <div style="padding:20px;border-bottom:2px solid #667eea;display:flex;justify-content:space-between;align-items:center;">
                <h2 style="margin:0;">üîÑ Rental Products</h2>
                <button onclick="backToRoleSelection()" style="padding:8px 16px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;">‚Üê Back</button>
            </div>
            <div class="search-bar">
                <input type="text" id="rentSearchInput" placeholder="Search rental products..." data-translate-placeholder="searchRentProducts" oninput="searchRentProducts()">
            </div>
            <div id="rentProductGrid" class="product-grid"></div>
        </div>

        <!-- Orders Page -->
        <div id="ordersPage" style="display: none;">
            <div style="padding:20px;border-bottom:2px solid #667eea;display:flex;justify-content:space-between;align-items:center;">
                <h2 style="margin:0;">üì¶ My Orders</h2>
                <button onclick="backToRoleSelection()" style="padding:8px 16px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;">‚Üê Back</button>
            </div>
            <div class="orders-container" style="padding:20px;max-width:1000px;margin:0 auto;">
                <div id="ordersContent"></div>
            </div>
        </div>

        <!-- Payment Confirmation Modal (for UPI flows) -->
        <div id="paymentConfirmationModal" class="modal" style="display:none;">
            <div class="modal-content" style="max-width:520px;padding:20px;">
                <span class="close" onclick="closePaymentModal()">&times;</span>
                <h2 style="margin-bottom:10px;">üì± Payment Confirmation</h2>
                <div id="paymentModalBody" style="margin-bottom:16px;">
                    <p id="paymentModalText">We have created a pending order. Open your UPI app to complete the payment, then return and mark the order as paid.</p>
                    <p style="font-size:0.95rem;color:#555;">Order ID: <strong id="pendingOrderId"></strong></p>
                    <p style="font-size:0.95rem;color:#555;">To: <strong id="pendingToUpi"></strong></p>
                    <p style="font-size:0.95rem;color:#555;">Amount: ‚Çπ<strong id="pendingAmount"></strong></p>
                </div>
                <div style="display:flex;gap:10px;">
                    <button onclick="openUpiForPendingOrder()" style="flex:1;padding:10px;background:#28a745;color:white;border:none;border-radius:6px;">üöÄ Open UPI App</button>
                    <button onclick="markPendingOrderPaid()" style="flex:1;padding:10px;background:#4a90e2;color:white;border:none;border-radius:6px;">‚úÖ I've Paid</button>
                </div>
                <div style="margin-top:10px;display:flex;justify-content:flex-end;">
                    <button onclick="cancelPendingOrder()" style="padding:8px 10px;background:#f0f0f0;border:none;border-radius:6px;">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Customer Management Page -->
        <div id="customerPage" style="display: none;">
            <div style="padding:20px;border-bottom:2px solid #667eea;display:flex;justify-content:space-between;align-items:center;">
                <h2 style="margin:0;">üë• Customer Management</h2>
                <button onclick="backToRoleSelection()" style="padding:8px 16px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;">‚Üê Back</button>
            </div>
            <div class="customer-container">
                <div class="customer-search-bar">
                    <input type="text" id="customerSearch" placeholder="Search customers by name, email, or phone..." oninput="searchCustomers()">
                    <button onclick="exportCustomers()" class="export-btn">üì• Export</button>
                </div>

                <div class="customer-form-section">
                    <h3>Add New Customer</h3>
                    <form id="customerForm" class="customer-form">
                        <div class="form-row">
                            <input type="text" id="customerName" placeholder="Full Name *" required>
                            <input type="email" id="customerEmail" placeholder="Email *" required>
                        </div>
                        <div class="form-row">
                            <input type="tel" id="customerPhone" placeholder="Phone Number *" required>
                            <input type="text" id="customerAddress" placeholder="Address">
                        </div>
                        <textarea id="customerNotes" placeholder="Notes (optional)" rows="3"></textarea>
                        <button type="submit" onclick="event.preventDefault(); addCustomer();">Add Customer</button>
                    </form>
                </div>

                <div class="customer-list-section">
                    <h3>Customer List</h3>
                    <div id="customerList"></div>
                </div>
            </div>
        </div>

        <!-- Cart Modal -->
        <div id="cartModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width:600px;">
                <span class="close" onclick="closeCart()">&times;</span>
                <h2 style="padding-bottom:15px;border-bottom:2px solid #667eea;margin-bottom:20px;color:#333;">üõí Shopping Cart</h2>
                <div id="cartItems"></div>
                <div style="padding:20px;background:#f9f9f9;border-radius:8px;margin-top:20px;border:2px solid #667eea;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                        <span style="font-size:1.1rem;color:#666;">Subtotal:</span>
                        <span id="cartSubtotal" style="font-size:1.1rem;font-weight:bold;color:#333;">‚Çπ0.00</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                        <span style="font-size:1.1rem;color:#666;">Tax (18%):</span>
                        <span id="cartTax" style="font-size:1.1rem;font-weight:bold;color:#ff6b6b;">‚Çπ0.00</span>
                    </div>
                    <div style="display:flex;justify-content:space-between;align-items:center;padding-top:15px;border-top:2px solid #ddd;">
                        <h3 style="margin:0;color:#333;">Total:</h3>
                        <h3 style="margin:0;color:#667eea;font-size:1.5rem;">‚Çπ<span id="cartTotal">0.00</span></h3>
                    </div>
                </div>
                <div style="display:flex;gap:10px;margin-top:20px;">
                    <button onclick="closeCart()" style="flex:1;padding:12px;background:#f0f0f0;color:#333;border:none;border-radius:4px;cursor:pointer;font-weight:bold;font-size:16px;">Continue Shopping</button>
                    <button onclick="checkout()" style="flex:1;padding:12px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;font-size:16px;">Proceed to Checkout</button>
                </div>
            </div>
        </div>

        <!-- Product Detail Modal -->
        <div id="productModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeProductModal()">&times;</span>
                <div id="productDetail"></div>
            </div>
        </div>

        <!-- Edit Product Modal -->
        <div id="editProductModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width:600px;max-height:90vh;overflow-y:auto;">
                <span class="close" onclick="closeEditModal()">&times;</span>
                <h2 style="padding-bottom:15px;border-bottom:2px solid #667eea;margin-bottom:20px;color:#333;">‚úèÔ∏è Edit Product</h2>
                <form id="editProductForm" style="display:flex;flex-direction:column;gap:15px;">
                    <div>
                        <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Product Name *</label>
                        <input type="text" id="editProductName" placeholder="Product name" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Description *</label>
                        <textarea id="editProductDesc" placeholder="Product description" required rows="3" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;resize:vertical;"></textarea>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Price (‚Çπ) *</label>
                            <input type="number" id="editProductPrice" placeholder="0.00" step="0.01" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Category *</label>
                            <select id="editProductCategory" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                                <option value="">Select Category</option>
                                <option value="plastic">Plastic</option>
                                <option value="wood">Wood</option>
                                <option value="steel">Steel</option>
                                <option value="electric">Electric</option>
                                <option value="bamboo">Bamboo</option>
                                <option value="metals">Metals</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Product Image</label>
                        <input type="file" id="editProductImage" accept="image/*" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        <small style="display:block;margin-top:5px;color:#999;">Leave empty to keep current image</small>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Eco Rating (1-5) *</label>
                            <input type="number" id="editEcoRating" min="1" max="5" placeholder="5" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Carbon Footprint (kg) *</label>
                            <input type="number" id="editCarbonFootprint" placeholder="0.00" step="0.01" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Manufacturer *</label>
                            <input type="text" id="editManufacturer" placeholder="Manufacturer name" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Location *</label>
                            <input type="text" id="editManufacturerLocation" placeholder="Location" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Manufacture Date *</label>
                            <input type="date" id="editManufactureDate" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Expiry Date</label>
                            <input type="date" id="editExpiryDate" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;">
                        </div>
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Usage Instructions</label>
                        <textarea id="editUsageInstructions" placeholder="How to use" rows="2" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;resize:vertical;"></textarea>
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:5px;font-weight:bold;color:#333;">Recycling Information</label>
                        <textarea id="editRecyclingInfo" placeholder="Recycling instructions" rows="2" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;resize:vertical;"></textarea>
                    </div>
                    <div>
                        <label style="display:flex;align-items:center;gap:8px;margin:15px 0;cursor:pointer;">
                            <input type="checkbox" id="editForRent" style="width:18px;height:18px;">
                            <span style="font-weight:bold;color:#333;">Available for Rent</span>
                        </label>
                    </div>
                    <div style="display:flex;gap:10px;margin-top:20px;">
                        <button type="button" onclick="closeEditModal()" style="flex:1;padding:12px;background:#f0f0f0;color:#333;border:none;border-radius:4px;cursor:pointer;font-weight:bold;">Cancel</button>
                        <button type="button" onclick="saveEditProduct()" style="flex:1;padding:12px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;">üíæ Save Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Barcode Scanner Modal -->
        <div id="scannerModal" class="modal" style="display: none;">
            <div class="modal-content scanner-content">
                <span class="close" onclick="closeScannerModal()">&times;</span>
                <h2 data-translate="scanBarcode">Scan Product Barcode</h2>
                <div class="scanner-container">
                    <div class="scanner-options">
                        <button onclick="startCamera()" class="scanner-btn">üì∑ <span data-translate="useCamera">Use Camera</span></button>
                        <button onclick="uploadBarcodeImage()" class="scanner-btn">üñºÔ∏è <span data-translate="uploadImage">Upload Image</span></button>
                        <input type="file" id="barcodeImageInput" accept="image/*" style="display: none;" onchange="processBarcodeImage(event)">
                    </div>
                    <div id="cameraContainer" style="display: none;">
                        <video id="cameraVideo" autoplay playsinline></video>
                        <canvas id="cameraCanvas" style="display: none;"></canvas>
                        <button onclick="captureBarcode()" class="capture-btn">üì∏ <span data-translate="capture">Capture</span></button>
                        <button onclick="stopCamera()" class="stop-btn">‚èπÔ∏è <span data-translate="stop">Stop</span></button>
                    </div>
                    <div id="scanResult"></div>
                </div>
            </div>
        </div>

        <!-- Scanned Product Info Modal -->
        <div id="scannedProductModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeScannedProductModal()">&times;</span>
                <div id="scannedProductInfo"></div>
            </div>
        </div>

        <!-- Checkout Modal -->
        <div id="checkoutModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width:700px;">
                <span class="close" onclick="closeCheckout()">&times;</span>
                <h2 style="padding-bottom:15px;border-bottom:2px solid #667eea;margin-bottom:25px;color:#333;">üõçÔ∏è Checkout</h2>
                <div id="checkoutForm" style="max-height:600px;overflow-y:auto;">
                    <!-- Delivery Address Section -->
                    <div style="margin-bottom:30px;padding:20px;background:#f9f9f9;border-radius:8px;border-left:4px solid #667eea;">
                        <h3 style="margin:0 0 15px 0;color:#333;font-size:1.1rem;">üìç Delivery Address</h3>
                        <textarea id="deliveryAddress" style="width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-family:Arial,sans-serif;font-size:14px;resize:vertical;min-height:100px;box-sizing:border-box;" placeholder="Enter your complete delivery address..." required></textarea>
                        <small style="display:block;margin-top:8px;color:#999;">Please provide your complete address including house number, street, area, city, and postal code</small>
                    </div>

                    <!-- Payment Method Section -->
                    <div style="margin-bottom:30px;padding:20px;background:#f9f9f9;border-radius:8px;border-left:4px solid #667eea;">
                        <h3 style="margin:0 0 15px 0;color:#333;font-size:1.1rem;">üí≥ Payment Method</h3>
                        <div style="display:flex;flex-direction:column;gap:15px;">
                            <label style="display:flex;align-items:center;padding:12px;background:white;border:2px solid #ddd;border-radius:4px;cursor:pointer;transition:all 0.3s ease;">
                                <input type="radio" name="payment" value="cod" checked style="width:18px;height:18px;cursor:pointer;margin-right:12px;">
                                <div>
                                    <strong style="display:block;color:#333;font-size:1rem;">üíµ Cash on Delivery</strong>
                                    <small style="color:#999;display:block;margin-top:3px;">Pay when your order arrives at your doorstep</small>
                                </div>
                            </label>
                            <label style="display:flex;align-items:center;padding:12px;background:white;border:2px solid #ddd;border-radius:4px;cursor:pointer;transition:all 0.3s ease;">
                                <input type="radio" name="payment" value="upi" style="width:18px;height:18px;cursor:pointer;margin-right:12px;">
                                <div>
                                    <strong style="display:block;color:#333;font-size:1rem;">üì± UPI Payment</strong>
                                    <small style="color:#999;display:block;margin-top:3px;">Pay instantly using UPI (Google Pay, PhonePe, Paytm)</small>
                                </div>
                            </label>
                            <label style="display:flex;align-items:center;padding:12px;background:white;border:2px solid #ddd;border-radius:4px;cursor:pointer;transition:all 0.3s ease;">
                                <input type="radio" name="payment" value="online" style="width:18px;height:18px;cursor:pointer;margin-right:12px;">
                                <div>
                                    <strong style="display:block;color:#333;font-size:1rem;">üîê Card Payment</strong>
                                    <small style="color:#999;display:block;margin-top:3px;">Pay securely using your credit/debit card</small>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- UPI Payment Details (Hidden by default) -->
                    <div id="upiPaymentDetails" style="display:none;margin-bottom:30px;padding:20px;background:#f9f9f9;border-radius:8px;border-left:4px solid #ff6b6b;">
                        <h3 style="margin:0 0 15px 0;color:#333;font-size:1.1rem;">üì± UPI Payment</h3>
                        
                        <!-- Seller QR Code Display (shown if seller has UPI) -->
                        <div id="sellerQrSection" style="display:none;">
                            <div style="padding:15px;background:white;border-radius:8px;border:2px solid #28a745;margin-bottom:15px;text-align:center;">
                                <p style="margin:0 0 10px 0;color:#333;font-weight:bold;">‚úÖ Seller's UPI Ready for Payment</p>
                                <small style="color:#666;">Scan QR code with your UPI app or use payment button below</small>
                            </div>
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;align-items:center;margin-bottom:15px;">
                                <div style="text-align:center;">
                                    <label style="display:block;margin-bottom:10px;color:#666;font-weight:bold;">Seller's UPI QR Code</label>
                                    <div id="sellerUpiQrCode" style="width:180px;height:180px;background:white;border:2px solid #ddd;border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto;">
                                        <small style="color:#999;">Generating QR...</small>
                                    </div>
                                    <button onclick="downloadSellerUpiQr()" style="margin-top:10px;padding:8px 12px;background:#667eea;color:white;border:none;border-radius:4px;cursor:pointer;font-size:12px;">üì• Download QR</button>
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:10px;color:#666;font-weight:bold;">Payment Details</label>
                                    <div style="padding:12px;background:white;border:1px solid #ddd;border-radius:4px;">
                                        <p style="margin:5px 0;color:#333;"><strong>Seller UPI:</strong> <span id="sellerUpiDisplay"></span></p>
                                        <p style="margin:5px 0;color:#333;"><strong>Amount:</strong> ‚Çπ<span id="checkoutAmount">0</span></p>
                                        <p style="margin:5px 0;color:#999;font-size:12px;">Tap below to complete payment</p>
                                    </div>
                                    <button onclick="sendPaymentToSellerUpi()" style="width:100%;margin-top:10px;padding:12px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;font-size:1rem;">üí≥ Pay with UPI</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Buyer UPI Input (shown if seller has no UPI) -->
                        <div id="buyerUpiSection" style="display:none;">
                            <div style="padding:15px;background:white;border-radius:8px;border:2px solid #ff9800;margin-bottom:15px;">
                                <p style="margin:0 0 10px 0;color:#333;font-weight:bold;">‚ö†Ô∏è Seller's UPI Not Available</p>
                                <small style="color:#666;">Seller hasn't added UPI details. You can send a payment request to their UPI.</small>
                            </div>
                            <div style="display:flex;flex-direction:column;gap:12px;margin-bottom:15px;">
                                <div>
                                    <label style="display:block;margin-bottom:8px;color:#666;font-weight:bold;">Your UPI ID</label>
                                    <input type="text" placeholder="Enter your UPI ID (e.g., yourname@upi)" style="width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;" id="buyerUpiId">
                                    <small style="display:block;margin-top:5px;color:#999;">e.g., yourname@googlepay, yourname@okhdfcbank</small>
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:8px;color:#666;font-weight:bold;">Seller's UPI ID</label>
                                    <input type="text" placeholder="Ask seller for their UPI ID" style="width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;" id="sellerUpiIdManual">
                                    <small style="display:block;margin-top:5px;color:#999;">Seller can provide this from their payment details</small>
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:8px;color:#666;font-weight:bold;">Amount (‚Çπ)</label>
                                    <input type="number" placeholder="0.00" style="width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;" id="paymentAmount">
                                </div>
                            </div>
                            <button onclick="sendUpiPaymentRequest()" style="width:100%;padding:12px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;font-size:1rem;">üì± Send Payment Request</button>
                            <small style="display:block;margin-top:12px;color:#999;">üîí Your UPI information is secure</small>
                        </div>
                    </div>

                    <!-- Card Payment Details (Hidden by default) -->
                    <div id="cardPaymentDetails" style="display:none;margin-bottom:30px;padding:20px;background:#f9f9f9;border-radius:8px;border-left:4px solid #ff6b6b;">
                        <h3 style="margin:0 0 15px 0;color:#333;font-size:1.1rem;">üí≥ Card Details</h3>
                        <div style="display:flex;flex-direction:column;gap:12px;">
                            <input type="text" placeholder="Card Number (16 digits)" style="padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;" maxlength="19">
                            <input type="text" placeholder="Card Holder Name" style="padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;">
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                                <input type="text" placeholder="MM/YY" style="padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;" maxlength="5">
                                <input type="text" placeholder="CVV (3 digits)" style="padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box;" maxlength="3">
                            </div>
                        </div>
                        <small style="display:block;margin-top:12px;color:#999;">üîí Your card information is secure and encrypted</small>
                    </div>

                    <!-- Order Summary -->
                    <div style="padding:20px;background:#e8f0fe;border-radius:8px;border-left:4px solid #4285f4;margin-bottom:20px;">
                        <h3 style="margin:0 0 15px 0;color:#333;font-size:1.1rem;">üìã Order Summary</h3>
                        <div style="display:flex;justify-content:space-between;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #ddd;">
                            <span style="color:#666;">Subtotal:</span>
                            <strong id="orderSubtotal" style="color:#333;">‚Çπ0.00</strong>
                        </div>
                        <div style="display:flex;justify-content:space-between;margin-bottom:0;">
                            <span style="color:#333;font-weight:bold;font-size:1.1rem;">Total Amount:</span>
                            <strong style="color:#667eea;font-size:1.3rem;">‚Çπ<span id="orderTotal">0.00</span></strong>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display:flex;gap:10px;margin-top:20px;padding-top:20px;border-top:1px solid #eee;">
                    <button onclick="closeCheckout()" style="flex:1;padding:12px;background:#f0f0f0;color:#333;border:none;border-radius:4px;cursor:pointer;font-weight:bold;font-size:16px;transition:all 0.3s ease;">Cancel</button>
                    <button onclick="placeOrder()" style="flex:1;padding:12px;background:#28a745;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;font-size:16px;transition:all 0.3s ease;">Place Order</button>
                </div>
            </div>
        </div>

        <!-- Chatbot -->
        <div id="chatbot" class="chatbot" style="display: none;">
            <div class="chatbot-header">
                <h3 data-translate="chatAssistant">Chat Assistant</h3>
                <button onclick="toggleChatbot()">‚úï</button>
            </div>
            <div id="chatMessages" class="chat-messages"></div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type a message..." data-translate-placeholder="typeMessage" onkeypress="if(event.key==='Enter') sendChatMessage()">
                <button onclick="sendChatMessage()">Send</button>
            </div>
        </div>

        <!-- Voice Assistant Indicator -->
        <div id="voiceIndicator" class="voice-indicator" style="display: none;">
            <div class="pulse"></div>
            <p data-translate="listening">Listening...</p>
        </div>

        <!-- Customer Orders Modal -->
        <div id="customerOrdersModal" class="modal" style="display: none;">
            <div class="modal-content large-modal">
                <span class="close" onclick="closeCustomerOrdersModal()">&times;</span>
                <div id="customerOrdersContent"></div>
            </div>
        </div>

        <!-- Review Modal -->
        <div id="reviewModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeReviewModal()">&times;</span>
                <div id="reviewContent"></div>
            </div>
        </div>

        <!-- Date Modal -->
        <div id="dateModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeDateModal()">&times;</span>
                <div id="dateContent"></div>
            </div>
        </div>

        <!-- Customer Feedback Modal -->
        <div id="customerFeedbackModal" class="modal" style="display: none;">
            <div class="modal-content large-modal">
                <span class="close" onclick="closeCustomerFeedbackModal()">&times;</span>
                <div id="customerFeedbackContent"></div>
            </div>
        </div>
    </div>
</body>
</html>
